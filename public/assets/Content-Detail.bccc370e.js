import { _ as N, d as M, o as q, u as z, y as T, z as V, a as u, c as i, g as e, A as L, r as l, l as k, s as F, t as c, F as x, h as B, i as f, p as R, j as S, B as U, e as I, C as G, n as Y, D as J, G as K, v as O, x as P } from "./index.463545f0.js"; const Q = { class: "main vuepress-markdown-body v-md-editor-preview center" }, W = ["innerHTML"], X = M({ __name: "Maincontent", props: { main: String }, setup(r) { const n = r, { proxy: d } = L(); return q(() => { setTimeout(() => { const h = document.querySelector(".main"); h && h.querySelectorAll("img").forEach(t => { t.setAttribute("data-fancybox", "gallery"), d.$fancyapps.Fancybox.bind('[data-fancybox="gallery"]', {}) }), document.querySelectorAll("button.v-md-copy-code-btn").forEach(t => { z(t, "click", p => { const v = p.target.parentElement.firstChild.innerText; navigator.clipboard.writeText(v).then(() => { if (T.closeAll(), !v) return V({ type: "error", grouping: !0, message: "\u590D\u5236\u5931\u8D25\uFF1A" }); T({ dangerouslyUseHTMLString: !0, message: '<i class="fa fa-copy"></i> \u590D\u5236\u6210\u529F,\u8F6C\u8F7D\u8BF7\u58F0\u660E\u4E00\u4E0B', position: "bottom-right", duration: 2e3, customClass: "copy-success" }) }, function (_) { console.log("lzy ~ res", _) }) }) }) }, 1e3) }), (h, g) => (u(), i("div", Q, [e("div", { innerHTML: n.main }, null, 8, W)])) } }); var Z = N(X, [["__scopeId", "data-v-0364e875"]]); const b = r => (O("data-v-2b654f3b"), r = r(), P(), r), ee = { class: "detail" }, te = { class: "imgtop" }, oe = ["src"], se = { class: "topTitle center" }, ne = { class: "center detBreadcrumb" }, ae = { class: "boxType" }, ce = { class: "affix" }, ue = { class: "affix_item" }, ie = b(() => e("span", null, "\u76EE\u5F55", -1)), le = { class: "affix-list" }, re = ["href"], de = { class: "post-footer center" }, _e = { class: "tool" }, me = b(() => e("a", { target: "_blank", href: "https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" }, "\u77E5\u8BC6\u5171\u4EAB\u7F72\u540D-\u975E\u5546\u4E1A\u6027\u4F7F\u7528-\u76F8\u540C\u65B9\u5F0F\u5171\u4EAB 4.0 \u56FD\u9645\u8BB8\u53EF\u534F\u8BAE", -1)), pe = { class: "borderw center" }, he = { class: "before" }, ve = { class: "comment" }, fe = { class: "comContent" }, ge = b(() => e("div", { class: "comment-item-left" }, [e("img", { src: "http://localhost:1027/img/lzy.jpg", alt: "" })], -1)), ye = { class: "comment-item-right" }, Ee = { class: "comment-item-right-top" }, Ce = { class: "comment-item-right-top-name" }, Fe = { class: "comment-item-right-top-time" }, xe = { class: "comment-item-right-bottom" }, Be = M({ __name: "Content-Detail", async setup(r) { let n, d; const g = U().path.replace("/home/detail/", ""), t = l(([n, d] = k(() => F("get", "/admin/articleDetail?aid=" + g)), n = await n, d(), n)); t.value = t.value.data; const p = l(null), { proxy: v } = L(), _ = l([]), A = l("#toc-head-1"), $ = l([{ name: "\u5C0F\u7EA2", time: "2022-10-03 12:00:00", content: "\u6211\u5165\u804C\u65F6\u505A\u8FC7\u6027\u683C\u6D4B\u8BD5\uFF0C\u6211\u5C5E\u4E8E\u84DD\u8272\u7684\uFF01" }, { name: "\u5C0F\u660E", time: "2022-10-01 12:00:00", content: "\u8FD9\u662F\u4E00\u6761\u8BC4\u8BBA" }]), y = l("\u5BFB\u627E\u4E2D..."); try { const a = ([n, d] = k(() => F("get", "/getIp/sentence")), n = await n, d(), n); y.value = a.data.content } catch (a) { console.log("\u8BF7\u6C42\u9891\u7387\u4E0A\u9650\uFF1A" + a + "\u4E24\u79D2\u540E\u91CD\u65B0\u8BF7\u6C42"), setTimeout(async () => { const E = await F("get", "/getIp/sentence"); y.value = E.data.content }, 2e3) } q(() => { document.querySelectorAll("pre code").forEach(s => { s.querySelectorAll(".hljs-ln-line.hljs-ln-n").forEach(m => { m.innerHTML = m.getAttribute("data-line-number") }) }), document.querySelectorAll("h2,h3,h4").forEach(s => { _.value.push({ title: s.innerText, id: "#" + s.id, top: s.offsetTop, nodeName: s.nodeName }) }), H(); let C = setTimeout(() => { var s; console.log("lzy ~ affixElm.value", p.value), p.value.style.height = ((s = document.querySelector(".main")) == null ? void 0 : s.getBoundingClientRect().height) + "px", clearTimeout(C) }, 500) }); function D(a) { return v.$common.timeAgo(a) } const w = l(0); function H() { z(window, "scroll", () => { w.value = window.scrollY, _.value.forEach(a => { w.value - 400 >= a.top && (A.value = a.id, document.querySelector(".affix-list li.H4")) }) }) } const j = () => { window.scrollTo({ top: 0, behavior: "smooth" }) }; return (a, E) => { const C = I("el-tag"), s = I("lzyIcon"); return u(), i("div", ee, [e("div", te, [e("img", { src: "" + t.value.coverImg, alt: "" }, null, 8, oe), e("div", se, [e("h1", null, c(t.value.title), 1), e("p", null, c(t.value.author) + " " + c(D(t.value.createTime)) + " " + c(t.value.comNumber) + "\u6761\u8BC4\u8BBA", 1)])]), e("div", ne, [e("div", ae, [(u(!0), i(x, null, B(t.value.wtype ? t.value.wtype.split(",") : [], (o, m) => (u(), G(C, { class: "ml-1", type: "info", key: m }, { default: Y(() => [S(c(o), 1)]), _: 2 }, 1024))), 128))])]), f(Z, { main: t.value.main }, null, 8, ["main"]), _.value.length != 0 ? (u(), i("div", { key: 0, class: "affix-container", ref_key: "affixElm", ref: p }, [e("div", ce, [e("div", ue, [e("div", { class: "affix-title", onClick: j }, [f(s, { name: "icon-icon-taikong17" }), ie]), e("ul", le, [(u(!0), i(x, null, B(_.value, o => (u(), i("li", { class: J(A.value == o.id ? "active " + o.nodeName : "" + o.nodeName), key: o.id }, [e("a", { href: o.id }, c(o.title), 9, re)], 2))), 128))])])])], 512)) : R("", !0), e("footer", de, [e("div", _e, [f(s, { name: "icon-icon-taikong20", fill: "#000" }), me])]), e("div", pe, [e("div", he, c(y.value), 1), e("div", ve, [e("h5", null, [f(K, { name: "icon-icon-taikong13" }), S("\u8BC4\u8BBA ")]), e("div", fe, [(u(!0), i(x, null, B($.value, (o, m) => (u(), i("div", { class: "comment-item", key: m }, [ge, e("div", ye, [e("div", Ee, [e("span", Ce, c(o.name), 1), e("span", Fe, c(D(o.time)), 1)]), e("div", xe, c(o.content), 1)])]))), 128))])])])]) } } }); var Ae = N(Be, [["__scopeId", "data-v-2b654f3b"]]); export { Ae as default };
